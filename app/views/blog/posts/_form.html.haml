/ views/blog/posts/_form.html.haml

= bootstrap_form_for(@post) do |f|
  
  = f.hidden_field :user_id

  - if @website
    = f.hidden_field :business_website_id, value: @website.id
  - else 
    - websites = Business::Website.order('url desc')
    = f.select :business_website_id, websites.map{|_| [_.decorate.host, _.id]}, 
    prompt: "#{t('forms.select')} #{tm('business/website')}..."

  = f.text_field :title
    
  = f.text_field :slug, prepend: @post.decorate.permalink_prefix, append: ".html", label: "Permalink"
  
  = f.hidden_field :body_xs_was, value: @post.body_xs
  
  = f.hidden_field :body_was, value: @post.body
  
  .hidden-sm-up= f.text_area :body_xs, placeholder: "Body"
  
  %fieldset.form-group.bootsy.hidden-xs-down{class: @post.decorate.body_xs_if_error_class }
    %label.control-label{for: :partner_request_body}= han('blog/post', :body)
    = f.bootsy_area :body, class: 'form-control', placeholder: "Body"
    %span.help-block= @post.decorate.errors[:body_xs].join(', ') if @post.decorate.has_errors(:body_xs)
  
  = f.datetime_select :published_at
  
  - if @post.featured_image_id?
    = attachment_image_tag @post, :featured_image, :fill, 100, 100, format: "jpg", class: 'img-fluid'
    = f.check_box :remove_featured_image
  - else
    %fieldset.form-group
      %label.control-label= han('blog/post', :featured_image)
      = image_tag 'decoration/placeholders/featured_image_100x100.png', class: 'uploaded_image img-fluid'
      .file-loading.invisible
        = i 'spinner fa-pulse'
        Loading....
      = f.attachment_field :featured_image, direct: true, class:"filestyle", data: {input:"false"}
  
  = f.primary "save Draft"
  
  